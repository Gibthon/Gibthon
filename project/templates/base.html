<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Gibthon:{{ title|default:"Home" }}</title>
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/jquery-ui-redmond.css" />
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/base.css" />
{% block css-include %}{% endblock %}
<script src="{{ MEDIA_URL }}/js/jquery.min.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}/js/jquery-ui.min.js" type="text/javascript"></script>
{% block js-include %}{% endblock %}
<script type="text/javascript">
{% block js %}{% endblock %}
$(document).ready(function() {
	$('button#login')
		.button({
			icons:{primary:'ui-icon-tag'}
		})
		.click(function() {
			window.location.href = '/user/login?next='+window.location.pathname;
		});
	$('button#logout')
		.button({
			icons:{primary:'ui-icon-tag'}
		})
		.click(function() {
			window.location.href = '/user/logout';
		});
	$('button#register')
		.button({
			icons:{primary:'ui-icon-key'}
		})
		.click(function() {
			window.location.href = '/user/register/';
		});
	$('button#back')
		.button({
			icons:{primary:'ui-icon-arrowthick-1-w'}
		})
		.click(function() {
			history.go(-1);
		});
	$('button#forward')
		.button({
			icons:{secondary:'ui-icon-arrowthick-1-e'}
		})
		.click(function() {
			history.go(1);
		});
	$('button#up')
		.button({
			icons:{primary:'ui-icon-arrowreturnthick-1-n'}
		})
		.click(function() {
			var re = /(\/(\d+\/)?[\w_ ]+)+/;
			var m = re.exec(window.location.pathname);
			if(m){
				window.location.href = (m[0] == m[1]) ? '/' : m[0].replace(m[1],'');
			} else {
				return false;
			}
		});
	$('button[id^="menu"]')
		.button()
		.click(function() {
			window.location.href = this.value;
		});
	
	$('input[id^="id_captcha"]').addClass('captcha');
	
	
});
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18410656-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>

<div class="container">
	<div class="ui-widget-header ui-corner-all" style="height:70px; margin-bottom:10px;">
		{% if user.is_authenticated %}
		<div style="float:right; margin:10px;">
			<h4 style="line-height:50px; font-size:0.8em;">Logged in as {{ user }}</h4>
		</div>
		{% endif %}
		<a href="/"><img src="{{ MEDIA_URL }}/images/gibthon2.0beta.png" style="height:60px; padding:5px 10px; float:left;" alt="Gibthon" /></a>
		<h2 style="line-height:70px;">Gibthon:<span style="font-size:0.7em">{{ title|default:"Home" }}</span></h2>
	</div>
	<div id="menu_wrap" style="width:170px; float:left;">
		<div class="ui-widget-content ui-corner-all menu">
			<p><strong>Navigation</strong></p>
			<button id="menu_home" value="/">Home</button>
			<button id="menu_profile" value="/user/profile/">Profile</button>
			<p><strong>Gibthon</strong></p>
			<button id="menu_fragment" value="/fragment/">Fragment library</button>
			<button id="menu_gibthon" value="/gibthon/">Construct Designer</button>
			<p><strong>Other Tools</strong></p>
			<button value="/tools/ligcalc/" id="menu_tools_ligate">LigCalc</button>
			<button value="/tools/molcalc/" id="menu_tools_molcal">MolCalc</button>
			<p><strong>Help</strong></p>
			<button value="/help/gibson/" id="menu_help_gibson">Gibson Assembly</button>
			<button value="/help/primer/" id="menu_help_primer">Primer Design</button>
			<button value="/help/gibthon/" id="menu_help_gibthon">Construct Designer</button>
		</div>
	</div>
	<div class="ui-widget-content ui-corner-all content">
		<button id="back">Back</button>
		<button id="up">Up</button>
		<button id="forward">Forward</button>
		{% block menu %}
		{% endblock %}
		{% if user.is_authenticated %}
			<button style="float:right;" id="logout">Log out</button>
		{% else %}
			<button style="float:right;" id="login">Log in</button>
			<button style="float:right; margin-right:5px;" id="register">Register</button>
		{% endif %}
	</div>
	{% block login_prompt %}
	{% if user.is_authenticated %}
	{% else %}
	<div class="ui-state-highlight ui-corner-all content">
	<p>Want to have a play around? Just <a href="/user/login">login</a> with the username 'demo' and password 'demo'. Nothing is guaranteed to work, but please email any problems you do find to <a href="mailto:bill@gibthon.org">me</a></p>
	</div>
	{% endif %}
	{% endblock %}
		{% block content %}{% endblock %}
	<div class="ui-widget-content ui-corner-all footer">
		Copyright 2011 Bill Collins
	</div>
</div>

{% block dialog %}
{% endblock %}
</body>
</html>
