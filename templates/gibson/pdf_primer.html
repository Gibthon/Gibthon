<html>
<head>

<style type="text/css">

th {
	text-align:left;
}

table {
    padding:1px;
}

.title {
	color:white;
}

h1 {
	font-size:3em;
}
h2.title {
	font-size:2em;
	padding-top:7px;
}

.ui-widget-header { border: 1px solid #4297d7; background: #5c9ccc url({{ STATIC_URL }}/css/images/ui-bg_gloss-wave_55_5c9ccc_500x100.png) 50% 50% repeat-x; color: #ffffff; font-weight: bold; }
@page {
  margin: 1cm;
  margin-bottom: 2.5cm;
  @frame header {
    -pdf-frame-content: headerContent;
    top: 0.8cm;
    margin-left: 0.8cm;
    margin-right: 0.8cm;
    height: 2cm;
  }
  @frame footer {
  	-pdf-frame-content: footerContent;
  	bottom: 0cm;
  	margin-left: 0.8cm;
    margin-right: 0.8cm;
    height: 1.5cm;
  }
  @frame footerText {
  	-pdf-frame-content: footerText;
  	bottom: 0cm;
  	margin-left: 0.8cm;
    margin-right: 0.8cm;
    height: 1.5cm;
  }
}

</style>
</head>
<body style="font-size:1.2em;">
<table>
	<tr><td style="width:50%;"><h1 class="title">{{ construct.name }}</h1></td><td class="title" style="width:50%; text-align:right;">http://django.gibthon.org/gibthon/{{ construct.id }}/{{ construct.name }}/</td>
	<tr><td style="vertical-align:top;">
		{{ construct.description|linebreaks }}
		<h4>Fragments: {{ construct.fragments.all.count }} </h4>
		<ol>
			{% for f in construct.fragments.all %}
				<li>{{ f.name }} <em>{{ f.description }}</em></li>
			{% endfor %}
		</ol>
		<h4>Features: {{construct.feature_count }}</h4>
		<ol>
			{% for f in construct.features_pretty %}
				<li>{{ f }}</li>
			{% endfor %}
		</ol>
		<h4>Total lenght: {{ construct.length }} bp</h4>
	</td>
	<td style="text-align:right; vertical-align:top;">
		<img src="{{ STATIC_URL }}/images/gibthon2.0beta.png" style="width:100px; height:100px;" />
		<h4>Generated by Gibthon Construct Designer</h4>
	</td></tr>
</table>

<hr />
<h3>Files included in this archive</h3>
<div style="font-family:monospace;">
&bull; {{ construct.name }}.pdf <em>- this file</em><br />
&bull; {{ construct.name }}.gb <em>- genbank file of construct</em><br />
&bull; {{ construct.name }}-primers.csv <em>- csv file of primers</em><br />
&bull; PCR/ <em>- openPCR config files</em><br />
{% for f in construct.fragments.all %}
&nbsp;&nbsp;&nbsp;&raquo; {{ construct.name }}-{{ f.name }}.pcr<br />
{% endfor %}
</div>
<pdf:nextpage />
<table>
	<tr><td style="width:100%;"><h2 class="title">Gibson Assembly Protocol:<em style="font-size:80%;">{{ construct.name }}</em></h2></td><td class="title" style="width:0%; text-align:right;"></td>
</table>
<br />
<h2>Protocol</h2>
<ol style="marign-left:20px;">
<li>Extend each fragment using the PCR protocols below</li>
<li>Make up the Assembly Mix with the PCR products</li>
<li>Incubate the Assembly Mix for 1 hour at 50&deg;C</li>
<li>Purify/transform</li>
</ol>
<br />
<table>
	<tr><th style="width:200px;"><h3>Assembly Mix</h3></th><th style="width:100px;">Volume</th></tr>
	<tr><td>Gibson Master Mix</td><td>15 &mu;l</td></tr>
	{% for f in construct.fragments.all %}
	<tr><td>{{ f.name }} <em>(extended)</em></td><td>{{ each|floatformat:1 }} &mu;l</td></tr>
	{% endfor %}
	<tr><th>Total</th><td>20 &mu;l</td></tr>
	<tr><th></th><th>&nbsp;</th></tr>
	<tr><th><h3>Gibson Master Mix</h3></th><th>Volume</th></tr>
	<tr><td>Taq ligase (40u/µl)</td><td>50 &mu;l</td></tr>
	<tr><td>5x isothermal buffer</td><td>100 &mu;l</td></tr>
	<tr><td>T5 exonuclease (1u/µl)</td><td>2 &mu;l</td></tr>
	<tr><td>Phusion polymerase (2u/µl)</td><td>6.25 &mu;l</td></tr>
	<tr><td>Nuclease-free water</td><td>216.75 &mu;l</td></tr>
	<tr><th>Total</th><td>375 &mu;l</td></tr>
	<tr><th></th><th>&nbsp;</th></tr>
	<tr><th><h3>5x isothermal buffer</h3></th><th>Volume</th></tr>
	<tr><td>25% PEG-8000</td><td>0.75g</td></tr>
	<tr><td>500 mM Tris-HCl pH 7.5</td><td>1500 &mu;l</td></tr>
	<tr><td>50mM MgCl<sub>2</sub></td><td>75 &mu;l</td></tr>
	<tr><td>50mM DTT</td><td>150 &mu;l</td></tr>
	<tr><td>1mM dATP</td><td>30 &mu;l</td></tr>
	<tr><td>1mM dTTP</td><td>30 &mu;l</td></tr>
	<tr><td>1mM dCTP</td><td>30 &mu;l</td></tr>
	<tr><td>1mM dGTP</td><td>30 &mu;l</td></tr>
	<tr><td>5mM NAD</td><td>300 &mu;l</td></tr>
	<tr><td>Nuclease-free water</td><td>...</td></tr>
	<tr><th>Total</th><td>3000 &mu;l</td></tr>
</table>

{% for cf in construct.cf.all %}
<pdf:nextpage />
<table>
	<tr><td style="width:50%;"><h2 class="title">{{ cf.fragment.name }}:<em style="font-size:80%;">{{ construct.name }}</em></h2></td><td class="title" style="width:50%; text-align:right;">Primer datasheet</td>
</table>
<h2>Primers</h2>
<div style="height:40%; margin-left:20px;">
{% with primer=cf.primer_top %}
<h3>{{ primer.name }}</h3>
<table style="padding-left:20px;">
	<tr>
		<th style="width:100px;"><em>Section</em></th><td style="width:100px;"><em>Full</em></td><td style="width:100px;"><em>Anneal</em></td>
	</tr>
	<tr>
		<th><em>Length</em></th><td>{{ primer.length }} bp</td><td>{{ primer.stick.length }} bp</td>
	</tr>
	<tr>
		<th><em>T<sub>m</sub></em></th><td>{{ primer.tm|floatformat }}&deg;C</td><td>{{ primer.stick.tm|floatformat }}&deg;C</td>
	</tr>
	<tr>
		<th><em>Sequence</em></th><td colspan="3"><tt>{{ primer.seq_pretty }}</tt></td>
	</tr>
</table>
{% endwith %}
</div>
<div style="height:40%; margin-left:20px;">
{% with primer=cf.primer_bottom %}
<h3>{{ primer.name }}</h3>
<table style="padding-left:20px;">
	<tr>
		<th style="width:100px;"><em>Section</em></th><td style="width:100px;"><em>Full</em></td><td style="width:100px;"><em>Anneal</em></td>
	</tr>
	<tr>
		<th><em>Length</em></th><td>{{ primer.length }} bp</td><td>{{ primer.stick.length }} bp</td>
	</tr>
	<tr>
		<th><em>T<sub>m</sub></em></th><td>{{ primer.tm|floatformat }}&deg;C</td><td>{{ primer.stick.tm|floatformat }}&deg;C</td>
	</tr>
	<tr>
		<th><em>Sequence</em></th><td colspan="3"><tt>{{ primer.seq_pretty }}</tt></td>
	</tr>
</table>
{% endwith %}
<hr />
<h2>PCR Protocol</h2>
<table style="margin-left:20px;">
<tr><th style="width:250px;"><h3>PCR Mix</h3></th><th style="width:100px;">Volume</th></tr>
<tr><td>Buffer</td><td>{{ construct.pcrsettings.buffer_v|floatformat:1 }} &mu;l</td></tr>
<tr><td>dNTPs</td><td>{{ construct.pcrsettings.dntp_v|floatformat:1 }} &mu;l</td></tr>
<tr><td>{{ cf.primer_top.name }}</td><td>{{ cf.primer_top.vol|floatformat:1 }} &mu;l</td></tr>
<tr><td>{{ cf.primer_bottom.name }}</td><td>{{ cf.primer_bottom.vol|floatformat:1 }} &mu;l</td></tr>
<tr><td>{{ cf.fragment.name }}</td><td>{{ cf.vol|floatformat:1 }} &mu;l</td></tr>
<tr><td>Enzyme</td><td>{{ construct.pcrsettings.enzyme_v|floatformat:1 }} &mu;l</td></tr>
<tr><td>Water</td><td>{{ cf.water_v|floatformat:1 }} &mu;l</td></tr>
<tr><th>Total Volume</th><td>{{ construct.pcrsettings.total_v|floatformat:1 }} &mu;l</td></tr>
</table>
<br />
<br />
<table style="margin-left:20px;">
<tr><th style="width:250px;"><h3>PCR Instructions</h3></th><th style="width:100px;">Temperature</th><th style="width:100px;">Time</th></tr>
<tr><th>Initial Melting</th><td>98&deg;C</td><td>30s</td></tr>
<tr><td colspan="3" style="text-align:center;"><em>cycle 30 times</em></td></tr>
<tr><th>Melting</th><td>98&deg;C</td><td>30s</td></tr>
<tr><th>Annealing</th><td>{{ cf.tm|floatformat:0 }}&deg;C</td><td>30s</td></tr>
<tr><th>Elongation</th><td>72&deg;C</td><td>{{ cf.time|floatformat:0 }}s</td></tr>
<tr><td colspan="3" style="text-align:center;"><em>end cycle</em></td></tr>
<tr><th>Final Elongation</th><td>98&deg;C</td><td>7m 30s</td></tr>
<tr><th>Final Hold</th><td>98&deg;C</td><td>&#8734;</td></tr>
</table>
</div>
{% endfor %}
<div id="headerContent">
    <img src="{{ STATIC_URL }}/css/images/ui-bg_gloss-wave_55_5c9ccc_500x100.png" style="height:50px; width:740px;" />
</div>
<div id="footerContent">
	<img src="{{ STATIC_URL }}/css/images/ui-bg_gloss-wave_55_5c9ccc_500x100.png" style="height:35px; width:740px;" />
</div>
<div id="footerText">
	<div style="padding-top:11px; text-align:center;" class="title">Created by {{ user.username }} on {% now "jS F Y H:i" %}</div>
</div>
</body>
</html>