{% extends "base.html" %}

{% block js-include %}
<script src="{{ STATIC_URL }}/js/fragmentview.js" type="text/javascript"></script>
{% endblock %}

{% block css-include%}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/fragmentview.css" />
{% endblock %}

{% block menu %}
|
<button id="download">Download</button>
{% endblock %}

{% block content %}

		<div class="ui-widget-content ui-corner-top top-box content">
			<div id="fragment_head_wrap">	
				<div id="fragment_info_wrap">
					<div id="fragment_info"></div>
				</div>
			
				<div id="fragment_construct_wrap">
					<div id="construct_wrap">
						<div class="ui-widget-header ui-corner-top">
						<h4>Found in {{ fragment.construct_slave.count }} construct{{ fragment.construct_slave.count|pluralize }}</h4>
						</div>
						<div class="ui-widget-content ui-corner-bottom">
							{% if fragment.construct_slave.all %}
							<ul>
								{% for construct in fragment.construct_slave.all %}
									<li><a href="/gibthon/{{ construct.id }}/{{construct.name}}/">{{ construct.name }}</a></li>
								{% endfor %}
							</ul>
							{% else %}
							<p>Not found in any constructs yet</p>
							{% endif %}
						</div>
					</div>
				</div>
				<div style="clear:both;"></div>
			</div>
		</div>
	<div id="sequence">
		
	</div>
{% endblock %}

{% block js %}
$(document).ready(function() {
	$('button#download')
		.button({
			icons:{primary:'ui-icon-link'}
		})
		.click(function() {
			window.location.href = '{{ fragment.name }}.gb';
		});
	$('#fragment_info').fragmentMeta({id: {{ fragment.id }}});
	
	$('#sequence').fragmentSequence({id: {{fragment.id}},});
});
{% endblock %}